<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web de Base de datos CARBONORA</title>
    <meta name="description" content="Base de datos de empleados de la empresa minera de carbones CARBONORA.">
    <meta name="keywords" content="datos, empleados, mineria, HTML, SEO">
    <link rel="stylesheet" href="carbonora.css">
    <link rel="stylesheet" href="inicio-animations.css">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <!-- Sistema de protección de acceso -->
    <script src="auth-guard.js"></script>
</head>
  <body>
    <!-- Sidebar -->
    <nav class="sidebar close">
      <header>
        <div class="image-text">
          <span class="image">
            <img src="Imagenes/logo-arizona.jpg" alt="LOGO">
          </span>
          <div class="text header-text">
            <span class="name">Carbonora</span>
            <span class="profesion">RH</span>
          </div>
        </div>
        <i class='bx bx-chevron-right toggle'></i>
      </header>
      <div class="menu-bar">
        <div class="menu">
          <li class="search-box">
            <i class='bx bx-search icon'></i>
            <input type="text" placeholder="Buscar...">
          </li>
          <ul class="menu-links">
            <li class="nav-link">
              <a href="Inicio.html">
                <i class='bx bx-home-alt icon'></i>
                <span class="text nav-text">Inicio</span>
              </a>
            </li>
            <!-- ITEM EMPLEADOS -->
            <li class="nav-link">
              <a href="Empleados.html">
                <i class='bx bxs-user-detail icon'></i>
                <span class="text nav-text">Empleados</span>
              </a>
              <ul class="SubEmpleados">
                <li><a href="Gerente.html">Gerente</a></li>
                <li><a href="Departamentos.html">Departamentos</a></li>
                <li><a href="Areas.html">Áreas</a></li>
              </ul>
            </li>
            <li class="nav-link">
              <a href="notificaciones.html">
                <i class='bx bx-bell icon'></i>
                <span class="text nav-text">Notificaciones</span>
              </a>
            </li>
            <li class="nav-link">
              <a href="estadisticas.html">
                <i class='bx bx-pie-chart-alt icon'></i>
                <span class="text nav-text">Estadisticas</span>
              </a>
            </li>
            <li class="nav-link">
              <a href="PQRS.html">
                <i class='bx bx-comment-error icon'></i>
                <span class="text nav-text">PQRS</span>
              </a>
            </li>
            <li class="nav-link">
              <a href="soporte.html">
                <i class='bx bx-help-circle icon'></i>
                <span class="text nav-text">Soporte</span>
              </a>
            </li>
          </ul>
        </div>
        <div class="bottom-content">
          <li>
            <a href="index.html">
              <i class='bx bx-log-out icon'></i>
              <span class="text nav-text">Salir</span>
            </a>
          </li>
          <li class="mode">
            <div class="sun-moon">
              <i class='bx bx-moon icon moon'></i>
              <i class='bx bx-sun icon sun'></i>
            </div>
            <span class="mode-text text">Modo oscuro</span>
            <div class="toggle-switch">
              <span class="switch"></span>
            </div>
          </li>
        </div>
      </div>
    </nav>

    <section class="home">
      <!-- Hero Banner Animado -->
      <div class="hero-banner">
        <div class="hero-content">
          <h1 class="hero-title">
            <i class='bx bxs-diamond'></i>
            Carbones Arizona
          </h1>
          <p class="hero-subtitle">Extrayendo energía, construyendo futuro</p>
          <div class="hero-stats">
            <div class="stat-card animate-slide-up">
              <i class='bx bxs-hard-hat'></i>
              <h3 id="employees-count">0</h3>
              <p>Empleados</p>
            </div>
            <div class="stat-card animate-slide-up delay-1">
              <i class='bx bxs-truck'></i>
              <h3>9+</h3>
              <p>Años de Experiencia</p>
            </div>
            <div class="stat-card animate-slide-up delay-2">
              <i class='bx bxs-shield-alt-2'></i>
              <h3>100%</h3>
              <p>Seguridad</p>
            </div>
          </div>
        </div>
        <div class="mining-animation">
          <div class="coal-particle"></div>
          <div class="coal-particle"></div>
          <div class="coal-particle"></div>
          <div class="coal-particle"></div>
          <div class="coal-particle"></div>
        </div>
      </div>

      <!-- Grid de Secciones Informativas -->
      <div class="info-grid">
        <div class="section-container card-animate">
          <div class="section-icon">
            <i class='bx bxs-bullseye'></i>
          </div>
          <h2 class="section-title">Misión de la Empresa</h2>
          <p class="section-content">
            CARBONES ARIZONA SAS es una empresa dedicada a la <strong>extracción, transporte y comercialización de carbón</strong>, comprometida con el bienestar de la comunidad, el desarrollo sostenible y el cumplimiento de las normativas legales vigentes en el sector minero, garantizando un servicio eficiente y de calidad.
          </p>
        </div>

        <div class="section-container card-animate">
          <div class="section-icon">
            <i class='bx bxs-rocket'></i>
          </div>
          <h2 class="section-title">Visión de la Empresa</h2>
          <p class="section-content">
            Para el año 2027, CARBONES ARIZONA SAS será una empresa <strong>líder y reconocida</strong> en el mercado nacional e internacional por su compromiso con la excelencia operativa, la responsabilidad social y la sostenibilidad ambiental, impulsando el crecimiento económico y el desarrollo de su comunidad.
          </p>
        </div>

        <div class="section-container card-animate">
          <div class="section-icon">
            <i class='bx bxs-briefcase'></i>
          </div>
          <h2 class="section-title">Contexto del Negocio</h2>
          <p class="section-content">
            CARBONES ARIZONA SAS es una empresa del sector minero dedicada a la extracción, transporte y comercialización de carbón, operando bajo <strong>estrictas normas de seguridad y calidad</strong>, con el objetivo de abastecer la demanda del mercado energético e industrial, promoviendo el desarrollo económico en sus zonas de influencia.
          </p>
        </div>
      </div>

      <!-- Objetivos Estratégicos con Iconos -->
      <div class="section-container objectives-section">
        <div class="section-icon-large">
          <i class='bx bxs-trophy'></i>
        </div>
        <h2 class="section-title">Objetivos Estratégicos</h2>
        <div class="objectives-grid">
          <div class="objective-card">
            <i class='bx bxs-leaf'></i>
            <p>Apoyar nuevas oportunidades e iniciativas productivas que generen empleo y desarrollo sostenible</p>
          </div>
          <div class="objective-card">
            <i class='bx bxs-group'></i>
            <p>Generar empleo local en las áreas de influencia, promoviendo el crecimiento económico regional</p>
          </div>
          <div class="objective-card">
            <i class='bx bxs-book-alt'></i>
            <p>Apoyar procesos productivos rurales y de formalización minera, contribuyendo a la legalidad del sector</p>
          </div>
          <div class="objective-card">
            <i class='bx bxs-network-chart'></i>
            <p>Dinamizar la economía local mediante alianzas estratégicas con otros sectores productivos</p>
          </div>
        </div>
      </div>

      <!-- Valores Corporativos con Diseño Mejorado -->
      <div class="section-container values-section">
        <div class="section-icon-large">
          <i class='bx bxs-heart'></i>
        </div>
        <h2 class="section-title">Valores Corporativos</h2>
        <div class="values-grid">
          <div class="value-card">
            <div class="value-icon">
              <i class='bx bxs-badge-check'></i>
            </div>
            <h3>Lealtad y Honestidad</h3>
            <p>Compromiso con la ética y la transparencia en todas nuestras acciones</p>
          </div>
          <div class="value-card">
            <div class="value-icon">
              <i class='bx bxs-hand-up'></i>
            </div>
            <h3>Responsabilidad</h3>
            <p>Cumplimiento de nuestras obligaciones con empleados, clientes y la comunidad</p>
          </div>
          <div class="value-card">
            <div class="value-icon">
              <i class='bx bxs-group'></i>
            </div>
            <h3>Trabajo en Equipo</h3>
            <p>Fomentamos la colaboración y el respeto entre nuestros colaboradores</p>
          </div>
          <div class="value-card">
            <div class="value-icon">
              <i class='bx bxs-shield-plus'></i>
            </div>
            <h3>Seguridad y Salud</h3>
            <p>Prioridad en la protección de nuestros trabajadores y el cumplimiento de normativas</p>
          </div>
          <div class="value-card">
            <div class="value-icon">
              <i class='bx bxs-tree'></i>
            </div>
            <h3>Conciencia Ecológica</h3>
            <p>Implementamos prácticas sostenibles que minimicen el impacto ambiental</p>
          </div>
        </div>
      </div>

      <!-- ACCESOS RÁPIDOS - Panel profesional -->
      <div class="quick-access-section" style="margin: 40px auto 60px; max-width: 1200px;">
        <style>
          .quick-access-title {
            text-align: center;
            margin-bottom: 40px;
          }
          .quick-access-title h2 {
            font-size: 2rem;
            color: #0D47A1;
            margin-bottom: 10px;
          }
          .quick-access-title p {
            color: #666;
            font-size: 1.1rem;
          }
          body.dark .quick-access-title h2 { color: #64B5F6; }
          body.dark .quick-access-title p { color: #aaa; }
          
          .quick-access-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            padding: 0 20px;
          }
          .quick-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 20px;
            padding: 35px 30px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(0,0,0,0.05);
            cursor: pointer;
            text-decoration: none;
            display: block;
          }
          .quick-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(13, 71, 161, 0.2);
          }
          body.dark .quick-card {
            background: linear-gradient(145deg, #2d2d2d 0%, #252525 100%);
            border-color: rgba(255,255,255,0.1);
          }
          body.dark .quick-card:hover {
            box-shadow: 0 20px 50px rgba(100, 181, 246, 0.2);
          }
          .quick-card-icon {
            width: 80px;
            height: 80px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5rem;
            color: white;
          }
          .quick-card-icon.blue { background: linear-gradient(135deg, #1976D2 0%, #0D47A1 100%); }
          .quick-card-icon.green { background: linear-gradient(135deg, #43A047 0%, #2E7D32 100%); }
          .quick-card-icon.orange { background: linear-gradient(135deg, #FB8C00 0%, #EF6C00 100%); }
          .quick-card-icon.purple { background: linear-gradient(135deg, #7B1FA2 0%, #512DA8 100%); }
          
          .quick-card h3 {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 10px;
          }
          body.dark .quick-card h3 { color: #fff; }
          .quick-card p {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.5;
          }
          body.dark .quick-card p { color: #aaa; }
          
          @media (max-width: 768px) {
            .quick-access-grid { grid-template-columns: 1fr; padding: 0 15px; }
            .quick-card { padding: 25px 20px; }
          }
        </style>
        
        <div class="quick-access-title">
          <h2><i class='bx bxs-dashboard' style="margin-right: 10px;"></i>Panel de Acceso Rápido</h2>
          <p>Accede fácilmente a las funciones principales del sistema</p>
        </div>
        
        <div class="quick-access-grid">
          <a href="Empleados.html" class="quick-card">
            <div class="quick-card-icon blue">
              <i class='bx bxs-user-detail'></i>
            </div>
            <h3>Gestión de Empleados</h3>
            <p>Consulta, edita y administra la información de los empleados</p>
          </a>
          
          <a href="estadisticas.html" class="quick-card">
            <div class="quick-card-icon green">
              <i class='bx bxs-pie-chart-alt-2'></i>
            </div>
            <h3>Estadísticas</h3>
            <p>Visualiza gráficos y reportes del personal</p>
          </a>
          
          <a href="Departamentos.html" class="quick-card">
            <div class="quick-card-icon orange">
              <i class='bx bxs-building-house'></i>
            </div>
            <h3>Departamentos</h3>
            <p>Organización y estructura departamental</p>
          </a>
          
          <a href="notificaciones.html" class="quick-card">
            <div class="quick-card-icon purple">
              <i class='bx bxs-bell-ring'></i>
            </div>
            <h3>Notificaciones</h3>
            <p>Revisa alertas y actualizaciones del sistema</p>
          </a>
        </div>
      </div>

      <button id="scrollTopBtn" title="Volver arriba">
        <i class='bx bxs-chevron-up'></i>
      </button>
    </section>
    <!-- Footer -->
    <footer>
      <p><em>Ayuda</em></p>
      <p><em>Contáctenos</em></p>
    </footer>

    <!-- Script JavaScript -->
    <script>
      // ======= CONFIGURACIÓN DINÁMICA DEL SIDEBAR SEGÚN ROL =======
      const userRole = localStorage.getItem('userRole');
      
      // Si es invitado, ocultar opciones protegidas
      if (userRole === 'invitado') {
        const protectedLinks = [
          'Empleados.html',
          'Gerente.html', 
          'Departamentos.html',
          'Areas.html',
          'notificaciones.html',
          'estadisticas.html',
          'PQRS.html'
        ];
        
        // Ocultar todos los enlaces protegidos
        protectedLinks.forEach(page => {
          const link = document.querySelector(`.nav-link a[href="${page}"]`);
          if (link) {
            link.closest('.nav-link').style.display = 'none';
          }
        });
        
        // Cambiar profesión mostrada
        const profesion = document.querySelector('.profesion');
        if (profesion) {
          profesion.textContent = 'Invitado';
        }
      }

      // ======= Referencias =======
      const sidebar   = document.querySelector('.sidebar');
      const toggleBtn = document.querySelector('.toggle');

      // Ítem Empleados y su submenú (solo para usuarios admin)
      const empleadosLink = document.querySelector('.nav-link a[href="Empleados.html"]');
      const empleadosItem = empleadosLink ? empleadosLink.parentElement : null;
      const submenu = empleadosItem ? empleadosItem.querySelector('.SubEmpleados') : null;

      // ======= Sidebar: Hover general =======
      sidebar.addEventListener('mouseenter', () => {
        if (!sidebar.classList.contains('pinned')) {
          sidebar.classList.remove('close');
        }
      });
      sidebar.addEventListener('mouseleave', () => {
        if (!sidebar.classList.contains('pinned')) {
          sidebar.classList.add('close');
        }
      });

      // ======= Botón Toggle (fijar/desfijar) =======
      toggleBtn.addEventListener('click', () => {
        if (sidebar.classList.contains('pinned')) {
          sidebar.classList.remove('pinned');
          sidebar.classList.add('close');
        } else {
          sidebar.classList.remove('close');
          sidebar.classList.add('pinned');
        }
      });

      // ======= Hover en "Empleados" para expandir la barra y mostrar submenú =======
      if (empleadosItem && submenu) {
        empleadosItem.addEventListener('mouseenter', () => {
          // Expandir la sidebar si está colapsada
          if (sidebar.classList.contains('close')) {
            sidebar.classList.remove('close');
          }
          // Mostrar el submenú
          submenu.style.display = 'block';
        });

        // ======= Lógica para mantener submenú abierto mientras el mouse está sobre él =======
        let isOverSubmenu = false;

        submenu.addEventListener('mouseenter', () => {
          isOverSubmenu = true;
        });
        submenu.addEventListener('mouseleave', () => {
          isOverSubmenu = false;
          submenu.style.display = 'none';
          if (!sidebar.classList.contains('pinned')) {
            sidebar.classList.add('close');
          }
        });

        // Al salir del ítem "Empleados", damos un pequeño retardo por si se mueve al submenú
        empleadosItem.addEventListener('mouseleave', () => {
          setTimeout(() => {
            if (!isOverSubmenu) {
              submenu.style.display = 'none';
              if (!sidebar.classList.contains('pinned')) {
                sidebar.classList.add('close');
              }
            }
          }, 150);
        });
      }
      
      const btn = document.getElementById("scrollTopBtn");

      window.addEventListener('scroll', () => {
        btn.style.display = window.scrollY > 300 ? 'block' : 'none';
      });

      btn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      document.addEventListener('DOMContentLoaded', () => {
        const body = document.querySelector('body');
        const modeSwitch = document.querySelector('.toggle-switch');
        const modeText = document.querySelector('.mode-text');

        if (!modeSwitch || !modeText || !body) return;

        // Cargar modo desde localStorage
        if (localStorage.getItem('theme') === 'dark') {
            body.classList.add('dark');
            modeText.innerText = 'Modo claro';
        }

        // Cambiar entre modo oscuro y claro
        modeSwitch.addEventListener('click', () => {
            body.classList.toggle('dark');
            const isDark = body.classList.contains('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            modeText.innerText = isDark ? 'Modo claro' : 'Modo oscuro';
        });

        // ======= Animaciones al cargar =======
        // Contador animado para empleados
        const employeesCounter = document.getElementById('employees-count');
        let count = 0;
        const targetCount = 39; // Ajusta según tu base de datos
        const duration = 2000;
        const increment = targetCount / (duration / 16);

        const counterInterval = setInterval(() => {
          count += increment;
          if (count >= targetCount) {
            employeesCounter.textContent = targetCount;
            clearInterval(counterInterval);
          } else {
            employeesCounter.textContent = Math.floor(count);
          }
        }, 16);

        // Intersection Observer para animaciones al scroll
        const observerOptions = {
          threshold: 0.1,
          rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('visible');
            }
          });
        }, observerOptions);

        // Observar todas las tarjetas animadas
        document.querySelectorAll('.card-animate, .objective-card, .value-card').forEach(card => {
          observer.observe(card);
        });
      });

      // ===== FUNCIONES DE DESCARGA DEL REGLAMENTO =====
      function showDownloadNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `download-notification ${type}`;
        notification.innerHTML = `
          <i class='bx ${type === 'success' ? 'bxs-check-circle' : type === 'error' ? 'bxs-x-circle' : 'bxs-info-circle'}'></i>
          <span>${message}</span>
        `;
        notification.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          padding: 15px 25px;
          border-radius: 12px;
          color: white;
          font-weight: 600;
          font-size: 14px;
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
          z-index: 10000;
          display: flex;
          align-items: center;
          gap: 10px;
          animation: slideInRight 0.4s ease;
          background: ${type === 'success' ? 'linear-gradient(135deg, #4caf50 0%, #2e7d32 100%)' : 
                       type === 'error' ? 'linear-gradient(135deg, #f44336 0%, #c62828 100%)' : 
                       'linear-gradient(135deg, #2196f3 0%, #1565c0 100%)'};
        `;
        
        // Añadir keyframes si no existen
        if (!document.querySelector('#download-notification-styles')) {
          const style = document.createElement('style');
          style.id = 'download-notification-styles';
          style.textContent = `
            @keyframes slideInRight {
              from { transform: translateX(100%); opacity: 0; }
              to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
              from { transform: translateX(0); opacity: 1; }
              to { transform: translateX(100%); opacity: 0; }
            }
          `;
          document.head.appendChild(style);
        }
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.style.animation = 'slideOutRight 0.4s ease forwards';
          setTimeout(() => notification.remove(), 400);
        }, 3000);
      }

      function downloadReglamento() {
        const btn = document.getElementById('btn-download-reglamento');
        const originalContent = btn.innerHTML;
        
        // Estado de carga
        btn.innerHTML = '<i class="bx bx-loader-alt bx-spin"></i> <span>Preparando...</span>';
        btn.disabled = true;
        btn.style.opacity = '0.8';
        
        showDownloadNotification('Iniciando descarga del reglamento...', 'info');
        
        // Crear enlace de descarga
        const link = document.createElement('a');
        link.href = 'REGLAMENTO%20INTERNO%20ACTUALIZADO%20AGOSTO%20%202025.pdf';
        link.download = 'Reglamento_Interno_Carbones_Arizona_2025.pdf';
        link.style.display = 'none';
        document.body.appendChild(link);
        
        setTimeout(() => {
          link.click();
          document.body.removeChild(link);
          
          btn.innerHTML = '<i class="bx bxs-check-circle"></i> <span>¡Descargado!</span>';
          btn.style.background = 'linear-gradient(135deg, #4caf50 0%, #2e7d32 100%)';
          showDownloadNotification('Reglamento descargado exitosamente', 'success');
          
          setTimeout(() => {
            btn.innerHTML = originalContent;
            btn.disabled = false;
            btn.style.opacity = '1';
            btn.style.background = '';
          }, 2500);
        }, 1000);
      }

      function viewReglamento() {
        const btn = document.getElementById('btn-view-reglamento');
        const originalContent = btn.innerHTML;
        
        btn.innerHTML = '<i class="bx bx-loader-alt bx-spin"></i> <span>Abriendo...</span>';
        btn.disabled = true;
        
        showDownloadNotification('Abriendo documento en nueva pestaña...', 'info');
        
        setTimeout(() => {
          window.open('REGLAMENTO%20INTERNO%20ACTUALIZADO%20AGOSTO%20%202025.pdf', '_blank');
          
          btn.innerHTML = originalContent;
          btn.disabled = false;
          showDownloadNotification('Documento abierto correctamente', 'success');
        }, 500);
      }
    </script>  </body>
</html>